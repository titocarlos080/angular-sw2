<div class="container">
  <h2>Gestión de Usuarios</h2>

  <div *ngIf="successMessage" class="alert alert-success">
    {{ successMessage }}
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>

  <button (click)="toggleForm()" class="btn btn-primary">{{ showForm ? 'Cancelar' : 'Nuevo Usuario' }}</button>

  <div *ngIf="showForm" class="form-container">
    <form (ngSubmit)="crearUsuario()">
      <div class="form-group">
        <label for="user">Usuario</label>
        <input type="text" id="user" [(ngModel)]="nuevoUsuario.user" name="user" class="form-control" required />
      </div>

      <div class="form-group">
        <label for="password">Contraseña</label>
        <input type="password" id="password" [(ngModel)]="nuevoUsuario.password" name="password" class="form-control"
          required />
      </div>

      <div class="form-group">
        <label for="nombre">Nombre</label>
        <input type="text" id="nombre" [(ngModel)]="nuevoUsuario.nombre" name="nombre" class="form-control" required />
      </div>

      <div class="form-group">
        <label for="apellidos">Apellidos</label>
        <input type="text" id="apellidos" [(ngModel)]="nuevoUsuario.apellidos" name="apellidos" class="form-control"
          required />
      </div>

      <div class="form-group">
        <label for="sexo">Sexo</label>
        <select id="sexo" [(ngModel)]="nuevoUsuario.sexo" name="sexo" class="form-control" required>
          <option value="Masculino">Masculino</option>
          <option value="Femenino">Femenino</option>
        </select>
      </div>

      <div class="form-group">
        <label for="fnac">Fecha de Nacimiento</label>
        <input type="date" id="fnac" [(ngModel)]="nuevoUsuario.fnac" name="fnac" class="form-control" required />
      </div>

      <div class="form-group">
        <label for="telefono">Teléfono</label>
        <input type="text" id="telefono" [(ngModel)]="nuevoUsuario.telefono" name="telefono" class="form-control"
          required />
      </div>

      <div class="form-group">
        <label for="correo">Correo</label>
        <input type="email" id="correo" [(ngModel)]="nuevoUsuario.correo" name="correo" class="form-control" required />
      </div>

      <div class="form-group">
        <label for="rol">Rol</label>
        <select id="rol" [(ngModel)]="nuevoUsuario.rol" name="rol" class="form-control" required>
          <option *ngFor="let rol of roles" [value]="rol.id">{{ rol.nombre }}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="fotoPath">Foto</label>
        <input type="file" id="fotoPath" [(ngModel)]="nuevoUsuario.fotoPath" name="fotoPath" class="form-control" />
      </div>

      <div class="form-group">
        <label for="especialidad">Especialidad</label>
        <input type="text" id="especialidad" [(ngModel)]="nuevoUsuario.especialidad" name="especialidad"
          class="form-control" />
      </div>

      <button type="submit" class="btn btn-success">Guardar</button>
    </form>
  </div>

  <div class="list-group">
    <div *ngFor="let usuario of usuarios" class="list-group-item">
      <div>{{ usuario.user }} - {{ usuario.nombre }} {{ usuario.apellidos }}</div>

      <div>
        <button (click)="editarUsuario(usuario)" class="btn btn-warning">Editar</button>
        <button (click)="eliminarUsuario(usuario.user)" class="btn btn-danger">Eliminar</button>
      </div>
    </div>
  </div>
</div>